{% extends "oplosser/base.html" %}
{% block content %}

<head>
    <style>
        .spinner {
            border: 12px solid #f3f3f3; /* Light grey */
            border-top: 12px solid #00d1ae; /* Blue */
            border-radius: 50%;
            width: 60px; /* Adjust the size here */
            height: 60px; /* Adjust the size here */
            animation: spin 1.75s linear infinite;
            margin: 0 auto; /* Center the spinner */
            display: block; /* Make the spinner a block element */
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    
        .form-spinner-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
    
        #equation-form {
            flex-grow: 1;
            margin-right: 20px;
        }

        #toggle-button {
            margin-left: 12px; /* Push the toggle button to the right */
        }
    
        #loadingSpinner {
            width: 60px; /* Adjust the size here */
            flex-shrink: 0;
            visibility: hidden;
            margin-top: -37px; /* Adjust the alignment here */
        }

        #function-list {
            border: 2px solid #00d1ae; /* Black border */
            padding: 20px; /* Some padding for spacing inside the box */
            border-radius: 10px; /* Rounded corners (optional) */
            background-color: #181722; /* Light grey background (optional) */
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1); /* Slight shadow for a 3D effect (optional) */
        }

    </style>
</head>

<body>
    <div class="container">
        <h1>Vergelijking Oplosser</h1>
        <div class="form-spinner-container">
            <form id="equation-form" method="post">
                {% csrf_token %}
                {{ form.as_p }}
                <br>
                <button type="submit" class="md-button md-button--primary">Oplossen <span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 6a6 6 0 0 1 6 6c0 2.22-1.21 4.16-3 5.2V19a1 1 0 0 1-1 1h-4a1 1 0 0 1-1-1v-1.8c-1.79-1.04-3-2.98-3-5.2a6 6 0 0 1 6-6m2 15v1a1 1 0 0 1-1 1h-2a1 1 0 0 1-1-1v-1h4m6-10h3v2h-3v-2M1 11h3v2H1v-2M13 1v3h-2V1h2M4.92 3.5l2.13 2.14-1.42 1.41L3.5 4.93 4.92 3.5m12.03 2.13 2.12-2.13 1.43 1.43-2.13 2.12-1.42-1.42Z"/></svg></span></button>
                <button id="toggle-button" class="md-button md-button--secondary">Laat Opties zien <span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12.42 5.29c-1.1-.1-2.07.71-2.17 1.82L10 10h2.82v2h-3l-.44 5.07A4.001 4.001 0 0 1 2 18.83l1.5-1.5c.33 1.05 1.46 1.64 2.5 1.3.78-.24 1.33-.93 1.4-1.74L7.82 12h-3v-2H8l.27-3.07a4.01 4.01 0 0 1 4.33-3.65c1.26.11 2.4.81 3.06 1.89l-1.5 1.5c-.25-.77-.93-1.31-1.74-1.38M22 13.65l-1.41-1.41-2.83 2.83-2.83-2.83-1.43 1.41 2.85 2.85-2.85 2.81 1.43 1.41 2.83-2.83 2.83 2.83L22 19.31l-2.83-2.81L22 13.65Z"/></svg></span></button>
            </form>

            <div id="loadingSpinner">
                <div class="spinner"></div>
            </div>
        </div>

        <br><br>
        <div id="function-list">
            <h2 id="mogelijke-opties">Mogelijke Opties</h2>
            <ul>
            <li>
            <p><strong>Afgeleides nemen:</strong> </p>
            <ul>
            <li><strong>Eerste Afgeleide:</strong> <span class="arithmatex">\(\phantom{.} \textrm{diff}(f(x)) \longrightarrow \textrm{diff(x^2 + 3x + 1)} = 2x + 3\)</span></li><br>
            <li><strong>n-de Afgeleide:</strong> <span class="arithmatex">\(\phantom{.} \textrm{diff}(f(x), \ x, \ n) \longrightarrow \textrm{diff(x^2 + 3x + 1, x, 2)} = 2\)</span> <br> <span class="arithmatex">\(\phantom{mmmmmmmm.} \Longrightarrow\)</span> De losse <span class="arithmatex">\(x\)</span> is hier de variabele waarover je de afgeleide neemt <br> <span class="arithmatex">\(\phantom{mmmmmmmm.} \Longrightarrow\)</span> <span class="arithmatex">\(n\)</span> is hoe vaak je de afgeleide neemt (dus <span class="arithmatex">\(n=2\)</span> is de dubbele afgeleide)<br><br></li>
            </ul>
            </li>
            <li>
            <p><strong>Integreren:</strong> </p>
            <ul>
            <li><strong>Primitieve:</strong> <span class="arithmatex">\(\phantom{.} \textrm{integrate}(f(x)) \longrightarrow \textrm{integrate(x^2)} = \dfrac{x^3}{3} + C\)</span></li>
            <li><strong>Bepaalde integraal:</strong> <span class="arithmatex">\(\phantom{.} \textrm{integrate}(f(x), \ (x, \ a, \ b)) \longrightarrow \textrm{integrate(x^2, (x, 0, 1))} = \int_0^1 x^2 \, dx = \dfrac{1}{3}\)</span> <br> <span class="arithmatex">\(\phantom{mmmmmmmm.} \Longrightarrow\)</span> De losse <span class="arithmatex">\(x\)</span> is hier de integratievariabele (dus de <span class="arithmatex">\(x\)</span> in <span class="arithmatex">\(dx\)</span>) <br> <span class="arithmatex">\(\phantom{mmmmmmmm.} \Longrightarrow\)</span> <span class="arithmatex">\(a\)</span> en <span class="arithmatex">\(b\)</span> zijn hier de begin- en eindgrenzen van de integraal. </li>
            </ul>
            </li>
            </ul>
            <h2 id="mogelijke-functies">Mogelijke Functies</h2>
            <ul>
            <li>
            <p><strong>Machten:</strong> <span class="arithmatex">\(\phantom{.} \textrm{x^n  of  x**n} \quad \longrightarrow \quad \textrm{x^2} = x^2 \ \ \textrm{ of } \ \ \textrm{x**2} = x^2 \phantom{.}\)</span> (allebei goed, kies wat je liever gebruikt) <br><br></p>
            </li>
            <li>
            <p><strong>Wortels:</strong></p>
            <ul>
            <li><span class="arithmatex">\(\textrm{sqrt(x)} = \sqrt{x}; \phantom{m} \quad \longrightarrow \quad \textrm{sqrt(4)} = \sqrt{4} = 2\)</span></li>
            <li><span class="arithmatex">\(\textrm{cbrt(x)} = \sqrt[3]{x}; \phantom{m} \quad \longrightarrow \quad \textrm{cbrt(8)} = \sqrt[3]{8} = 2\)</span></li>
            <li><span class="arithmatex">\(\textrm{root(x, n)} = \sqrt[n]{x}; \quad \longrightarrow \quad \textrm{root(16, 4)} = \sqrt[4]{16} = 2\)</span> <br><br></li>
            </ul>
            </li>
            <li>
            <p><strong>Goniometrische Functies:</strong></p>
            <ul>
            <li><span class="arithmatex">\(\textrm{sin(x)}\)</span> met inverse <span class="arithmatex">\(\textrm{asin(x)} = \sin^{-1}(x)\)</span></li>
            <li><span class="arithmatex">\(\textrm{cos(x)}\)</span> met inverse <span class="arithmatex">\(\textrm{acos(x)} = \cos^{-1}(x)\)</span></li>
            <li><span class="arithmatex">\(\textrm{tan(x)}\)</span> met inverse <span class="arithmatex">\(\textrm{atan(x)} = \tan^{-1}(x)\)</span> <br><br></li>
            </ul>
            </li>
            <li>
            <p><strong>Absolute Waarde:</strong> <span class="arithmatex">\(\phantom{.} \textrm{|x|  of  abs(x)} \quad \longrightarrow \quad \textrm{|-2|} = 2 \ \ \textrm{ of } \ \ \textrm{abs(-2)} = 2 \phantom{.}\)</span> (allebei goed, kies wat je liever gebruikt) <br><br></p>
            </li>
            <li>
            <p><strong>Exponententieel:</strong> <span class="arithmatex">\(\phantom{.} \textrm{e^x  of  exp(x)} \quad \longrightarrow \quad \textrm{e^(2x)} = e^{2x} \ \ \textrm{ of } \ \ \textrm{exp(2x)} = e^{2x} \phantom{.}\)</span> (allebei goed, kies wat je liever gebruikt) <br><br></p>
            </li>
            <li>
            <p><strong>Logaritmes:</strong> </p>
            <ul>
            <li><strong>Grondgetal e:</strong> <span class="arithmatex">\(\phantom{.} \textrm{ln(x)} \phantom{mmmm} \quad \longrightarrow \quad \textrm{ln(e^4)} = \ln(e^4) = 4\)</span></li>
            <li><strong>Grondgetal 10:</strong> <span class="arithmatex">\(\phantom{.} \textrm{log(x)} \phantom{mmm} \quad \longrightarrow \quad \textrm{log(100)} = \ ^{10} \! \log(100) = 2\)</span></li>
            <li><strong>Ander Grondgetal:</strong> <span class="arithmatex">\(\phantom{.} \textrm{log(x, n)} \phantom{.} \quad \longrightarrow \quad \textrm{log(8, 2)} = \ ^{2} \! \log(8) = 3\)</span></li>
            </ul>
            </li>
            </ul>
        </div>

        <div id="result"></div>
    </div>
</body>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script>
$(document).ready(function(){
    $("#equation-form").submit(function(e){
        e.preventDefault();

        // Show the spinner
        document.getElementById('loadingSpinner').style.visibility = 'visible';


        // Google Analytics event tracking
        dataLayer.push({
            'event': 'submit',
            'event_category': 'Equation',
            'event_label': 'Equation Submitted',
            'value': 1
        });

        $.ajax({
            url: $(this).attr('action'),
            type: 'post',
            data: $(this).serialize(),
            success: function(response){
                // Hide the spinner
                document.getElementById('loadingSpinner').style.visibility = 'hidden';

                // Hide the FUnction List
                document.getElementById('function-list').style.display = 'none';

                $("#result").html(response.result);
            },
            error: function() {
                // Hide the spinner in case of error
                document.getElementById('loadingSpinner').style.visibility = 'hidden';
            }
        });
    });

    // Toggle button event listener
    $('#toggle-button').click(function(e) {
        e.preventDefault(); // Prevent the button from submitting the form

        var functionList = $('#function-list');
        var result = $('#result');

        if (functionList.is(':visible')) {
            functionList.hide();
            result.show();
        } else {
            functionList.show();
            result.hide();
        }
    });

});
</script>

{% endblock content %}